<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="C# Mini Project - Car Rental program detailed overview" /><meta property="og:locale" content="en" /><meta name="description" content="In this article, we will be reviewing a simple Windows program which can be used to manage a car rental company. The program is synced to a MS SQL Server database and it features basic features like registration of cars and customers, tracking of rentals and returns." /><meta property="og:description" content="In this article, we will be reviewing a simple Windows program which can be used to manage a car rental company. The program is synced to a MS SQL Server database and it features basic features like registration of cars and customers, tracking of rentals and returns." /><link rel="canonical" href="https://sbozich.github.io/posts/mini-project-car-rental/" /><meta property="og:url" content="https://sbozich.github.io/posts/mini-project-car-rental/" /><meta property="og:site_name" content="sbozich" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-11-08T00:00:00+01:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="C# Mini Project - Car Rental program detailed overview" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-11-10T11:14:54+01:00","datePublished":"2022-11-08T00:00:00+01:00","description":"In this article, we will be reviewing a simple Windows program which can be used to manage a car rental company. The program is synced to a MS SQL Server database and it features basic features like registration of cars and customers, tracking of rentals and returns.","headline":"C# Mini Project - Car Rental program detailed overview","mainEntityOfPage":{"@type":"WebPage","@id":"https://sbozich.github.io/posts/mini-project-car-rental/"},"url":"https://sbozich.github.io/posts/mini-project-car-rental/"}</script><title>C# Mini Project - Car Rental program detailed overview | sbozich</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="sbozich"><meta name="application-name" content="sbozich"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://avatars.githubusercontent.com/u/92573419?s=400&u=b8588cad17faefe915dd88072a9fdd03b516d081&v=4" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">sbozich</a></div><div class="site-subtitle font-italic">Bits&pieces about tech</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/sbozich" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['newbraveworld','zohomail.eu'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>C# Mini Project - Car Rental program detailed overview</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>C# Mini Project - Car Rental program detailed overview</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1667862000" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Nov 8, 2022 </em> </span> <span> Updated <em class="" data-ts="1668075294" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Nov 10, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/sbozich">Sinisa Bozic</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2145 words"> <em>11 min</em> read</span></div></div></div><div class="post-content"><p>In this article, we will be reviewing a simple Windows program which can be used to manage a car rental company. The program is synced to a MS SQL Server database and it features basic features like registration of cars and customers, tracking of rentals and returns.</p><p><img data-src="https://sbozich.github.io/assets/081122Showcase.gif" alt="" data-proofer-ignore></p><p>Front-end uses Windows Forms UI framework and the development is done in Visual Studio. The source code is available at <a href="https://github.com/sbozich/Car-Rental" target="_blank">this link</a>.</p><h2 id="database-overview"><span class="mr-2">Database overview</span><a href="#database-overview" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><img data-src="https://sbozich.github.io/assets/08112201.gif" alt="" data-proofer-ignore></p><p>The database part is done in SQL Server and it consists of four simple tables:</p><ul><li>dbo.carreg is the table where rental cars are registered,<li>dbo.customer is the table for customers records,<li>dbo.rental tracks rentals with date records,<li>dbo.returncar manages returns of cars, i.e., termination of rentals.</ul><p><i>Note:</i> dbo prefix is automatically added on the creation of tables in SQL Server Management Console, they can be referenced with and without this prefix.</p><h2 id="structure-of-the-program"><span class="mr-2">Structure of the program</span><a href="#structure-of-the-program" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><img data-src="https://sbozich.github.io/assets/08112202.jpg" alt="" data-proofer-ignore></p><p>A program consists of the login screen, main window and sub-windows for each option (car registration, customer data, rental and return records). The main Program.cs section calls the Form1.cs and so the program is being run. The program consists of multiple .cs files which are separate classes itself. They are designed using Windows Forms UI elements from the Visual Studio corresponding toolbar.</p><h3 id="login-screen-form1cs"><span class="mr-2">Login screen (Form1.cs)</span><a href="#login-screen-form1cs" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><img data-src="https://sbozich.github.io/assets/08112203.jpg" alt="" data-proofer-ignore></p><p>This simple form consists of two textboxes and two buttons. There is a predefined username (testadmin) and password (123) which is checked upon the click on the Login button. If the username and password are correctly entered, the program then creates a new instance of the class Main and displays it.</p><div class="language-c# highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="k">private</span> <span class="k">void</span> <span class="nf">button1_Click</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">EventArgs</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">string</span> <span class="n">uname</span> <span class="p">=</span> <span class="n">txtuname</span><span class="p">.</span><span class="n">Text</span><span class="p">;</span>
    <span class="kt">string</span> <span class="n">pass</span> <span class="p">=</span> <span class="n">txtpass</span><span class="p">.</span><span class="n">Text</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">uname</span><span class="p">.</span><span class="nf">Equals</span><span class="p">(</span><span class="s">"testadmin"</span><span class="p">)</span> <span class="p">&amp;&amp;</span> <span class="n">pass</span><span class="p">.</span><span class="nf">Equals</span><span class="p">(</span><span class="s">"123"</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="n">Main</span> <span class="n">m</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Main</span><span class="p">();</span>
        <span class="k">this</span><span class="p">.</span><span class="nf">Hide</span><span class="p">();</span>
        <span class="n">m</span><span class="p">.</span><span class="nf">Show</span><span class="p">();</span>
    <span class="p">}</span>
        <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">MessageBox</span><span class="p">.</span><span class="nf">Show</span><span class="p">(</span><span class="s">"Username or password do not match"</span><span class="p">);</span>
        <span class="n">txtuname</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>
        <span class="n">txtpass</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>
        <span class="n">txtuname</span><span class="p">.</span><span class="nf">Focus</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="main-window-maincs"><span class="mr-2">Main window (Main.cs)</span><a href="#main-window-maincs" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><img data-src="https://sbozich.github.io/assets/08112204.jpg" alt="" data-proofer-ignore></p><p>This section simply creates objects (class instances of the corresponding classes) and displays them via the buttonX_click method:</p><div class="language-c# highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre><td class="rouge-code"><pre><span class="k">private</span> <span class="k">void</span> <span class="nf">button1_Click</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">EventArgs</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">carreg</span> <span class="n">c</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">carreg</span><span class="p">();</span>
    <span class="n">c</span><span class="p">.</span><span class="nf">Show</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">button2_Click</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">EventArgs</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">customer</span> <span class="n">c</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">customer</span><span class="p">();</span>
    <span class="n">c</span><span class="p">.</span><span class="nf">Show</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">button3_Click</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">EventArgs</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">rental</span> <span class="n">r</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">rental</span><span class="p">();</span>
    <span class="n">r</span><span class="p">.</span><span class="nf">Show</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">button4_Click</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">EventArgs</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">returncar</span> <span class="n">r</span><span class="p">=</span><span class="k">new</span> <span class="nf">returncar</span><span class="p">();</span>
    <span class="n">r</span><span class="p">.</span><span class="nf">Show</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">button5_Click</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">EventArgs</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nf">Close</span><span class="p">();</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="car-registration-carregcs"><span class="mr-2">Car registration (carreg.cs)</span><a href="#car-registration-carregcs" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><img data-src="https://sbozich.github.io/assets/08112205.jpg" alt="" data-proofer-ignore></p><p>From the designer’s viewpoint, this form consists of multiple elements like textboxes, buttons, grids, etc. Obviously, user can enter a registration number, make and model, and to mark whether the auto is available or not. Those data is then entered into the database and displayed within the DataGridView element on the right side. Let’s examine the most important parts of this structures and their link to the underlying code.</p><p>The connection to the SQL Server is established by following code:</p><div class="language-c# highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>
<span class="k">using</span> <span class="nn">System.Data.SqlClient</span><span class="p">;</span>        

<span class="n">SqlConnection</span> <span class="n">con</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SqlConnection</span><span class="p">(</span><span class="s">"Data Source=DESKTOP-N5IF2SJ\\SQLEXPRESS; Initial Catalog=carrental; User ID=testadmin; Password=123;"</span><span class="p">);</span>
<span class="n">SqlCommand</span> <span class="n">cmd</span><span class="p">;</span>
<span class="n">SqlDataReader</span> <span class="n">dr</span><span class="p">;</span>
</pre></table></code></div></div><p>Notice that this code will be the same in the other parts of the program. The objects cmd and dr are instances of the SqlCommand and SqlDataReader classes; the first one provides the possibility of entering the SQL commands, another one executes SqlDataReader objects.</p><p>The class consists of multiple methods which are repeated throughout the project. The method load() loads the data from the carreg table into the DataGridView element:</p><div class="language-c# highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="k">public</span> <span class="k">void</span> <span class="nf">load</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">sql</span> <span class="p">=</span> <span class="s">"select * from carreg"</span><span class="p">;</span>
    <span class="n">cmd</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SqlCommand</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span><span class="n">con</span><span class="p">);</span>
    <span class="n">con</span><span class="p">.</span><span class="nf">Open</span><span class="p">();</span>
    <span class="n">dr</span> <span class="p">=</span> <span class="n">cmd</span><span class="p">.</span><span class="nf">ExecuteReader</span><span class="p">();</span>
    <span class="n">dataGridView1</span><span class="p">.</span><span class="n">Rows</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>

    <span class="k">while</span><span class="p">(</span><span class="n">dr</span><span class="p">.</span><span class="nf">Read</span><span class="p">())</span>
    <span class="p">{</span>
        <span class="n">dataGridView1</span><span class="p">.</span><span class="n">Rows</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">dr</span><span class="p">[</span><span class="m">0</span><span class="p">],</span> <span class="n">dr</span><span class="p">[</span><span class="m">1</span><span class="p">],</span> <span class="n">dr</span><span class="p">[</span><span class="m">2</span><span class="p">],</span> <span class="n">dr</span><span class="p">[</span><span class="m">3</span><span class="p">]);</span>
    <span class="p">}</span>
        <span class="n">con</span><span class="p">.</span><span class="nf">Close</span><span class="p">();</span>
<span class="p">}</span>
</pre></table></code></div></div><p>The method getid() displays the data from carreg table into the outlined textbox fields. This method is called later when editing the car data records.</p><p><img data-src="https://sbozich.github.io/assets/08112206.jpg" alt="" data-proofer-ignore></p><div class="language-c# highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="k">public</span> <span class="k">void</span> <span class="nf">getid</span><span class="p">(</span><span class="kt">string</span> <span class="n">id</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">sql</span> <span class="p">=</span> <span class="s">"select * from carreg where regno='"</span> <span class="p">+</span> <span class="n">id</span> <span class="p">+</span> <span class="s">"'"</span><span class="p">;</span>
    <span class="n">cmd</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SqlCommand</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span><span class="n">con</span><span class="p">);</span>
    <span class="n">con</span><span class="p">.</span><span class="nf">Open</span><span class="p">();</span>
    <span class="n">dr</span> <span class="p">=</span> <span class="n">cmd</span><span class="p">.</span><span class="nf">ExecuteReader</span><span class="p">();</span>

    <span class="k">while</span><span class="p">(</span><span class="n">dr</span><span class="p">.</span><span class="nf">Read</span><span class="p">())</span>
    <span class="p">{</span>
        <span class="n">txtregno</span><span class="p">.</span><span class="n">Text</span> <span class="p">=</span> <span class="n">dr</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="nf">ToString</span><span class="p">();</span>
        <span class="n">txtmake</span><span class="p">.</span><span class="n">Text</span> <span class="p">=</span> <span class="n">dr</span><span class="p">[</span><span class="m">1</span><span class="p">].</span><span class="nf">ToString</span><span class="p">();</span>
        <span class="n">txtmodel</span><span class="p">.</span><span class="n">Text</span> <span class="p">=</span> <span class="n">dr</span><span class="p">[</span><span class="m">2</span><span class="p">].</span><span class="nf">ToString</span><span class="p">();</span>
        <span class="n">txtavl</span><span class="p">.</span><span class="n">Text</span> <span class="p">=</span> <span class="n">dr</span><span class="p">[</span><span class="m">3</span><span class="p">].</span><span class="nf">ToString</span><span class="p">();</span> 

    <span class="p">}</span>
        <span class="n">con</span><span class="p">.</span><span class="nf">Close</span><span class="p">();</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Notice how this line enables the calling of the records with different ID numbers by declaring string variable id and escaping the characters while doing the SQL call:</p><div class="language-c# highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>
    <span class="n">sql</span> <span class="p">=</span> <span class="s">"select * from carreg where regno='"</span> <span class="p">+</span> <span class="n">id</span> <span class="p">+</span> <span class="s">"'"</span><span class="p">;</span>
</pre></table></code></div></div><p>The data from the database is then parsed to the corresponding text boxes.</p><h4 id="button1-click-event"><span class="mr-2">button1 click event</span><a href="#button1-click-event" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>The button “Add” has internal name button1. When the user click add, the entered data from the textboxes are entered into the database. This button has also a second function, which is update of selected records within database. Via the variable Mode, the selection is being made whether the new data is inserted into the database, or the existing data is being edited. The variable is also being used by another method which can change the state.</p><div class="language-c# highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
</pre><td class="rouge-code"><pre>
<span class="k">private</span> <span class="k">void</span> <span class="nf">button1_Click</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">EventArgs</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">string</span> <span class="n">regno</span> <span class="p">=</span> <span class="n">txtregno</span><span class="p">.</span><span class="n">Text</span><span class="p">;</span>
    <span class="kt">string</span> <span class="n">make</span> <span class="p">=</span> <span class="n">txtmake</span><span class="p">.</span><span class="n">Text</span><span class="p">;</span>
    <span class="kt">string</span> <span class="n">model</span> <span class="p">=</span> <span class="n">txtmodel</span><span class="p">.</span><span class="n">Text</span><span class="p">;</span>
    <span class="kt">string</span> <span class="n">aval</span> <span class="p">=</span> <span class="n">txtavl</span><span class="p">.</span><span class="n">SelectedItem</span><span class="p">.</span><span class="nf">ToString</span><span class="p">();</span>

    <span class="k">if</span><span class="p">(</span><span class="n">Mode</span><span class="p">==</span><span class="k">true</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">sql</span> <span class="p">=</span> <span class="s">"insert into carreg(regno, make, model, available) values(@regno, @make, @model, @available)"</span><span class="p">;</span>
        <span class="n">con</span><span class="p">.</span><span class="nf">Open</span><span class="p">();</span>
        <span class="n">cmd</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SqlCommand</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span> <span class="n">con</span><span class="p">);</span>
        <span class="n">cmd</span><span class="p">.</span><span class="n">Parameters</span><span class="p">.</span><span class="nf">AddWithValue</span><span class="p">(</span><span class="s">"@regno"</span><span class="p">,</span> <span class="n">regno</span><span class="p">);</span>
        <span class="n">cmd</span><span class="p">.</span><span class="n">Parameters</span><span class="p">.</span><span class="nf">AddWithValue</span><span class="p">(</span><span class="s">"@make"</span><span class="p">,</span> <span class="n">make</span><span class="p">);</span>
        <span class="n">cmd</span><span class="p">.</span><span class="n">Parameters</span><span class="p">.</span><span class="nf">AddWithValue</span><span class="p">(</span><span class="s">"@model"</span><span class="p">,</span> <span class="n">model</span><span class="p">);</span>
        <span class="n">cmd</span><span class="p">.</span><span class="n">Parameters</span><span class="p">.</span><span class="nf">AddWithValue</span><span class="p">(</span><span class="s">"@available"</span><span class="p">,</span> <span class="n">aval</span><span class="p">);</span>
        <span class="n">cmd</span><span class="p">.</span><span class="nf">ExecuteNonQuery</span><span class="p">();</span>
        <span class="n">MessageBox</span><span class="p">.</span><span class="nf">Show</span><span class="p">(</span><span class="s">"Record added"</span><span class="p">);</span>

        <span class="n">txtmake</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>
        <span class="n">txtmodel</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>
        <span class="n">txtmake</span><span class="p">.</span><span class="nf">Focus</span><span class="p">();</span>
        
                

    <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>

            <span class="n">sql</span> <span class="p">=</span> <span class="s">"update carreg set make=@make,model=@model,available=@available where regno=@regno"</span><span class="p">;</span>
            <span class="n">con</span><span class="p">.</span><span class="nf">Open</span><span class="p">();</span>
            <span class="n">cmd</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SqlCommand</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span> <span class="n">con</span><span class="p">);</span>
            
            <span class="n">cmd</span><span class="p">.</span><span class="n">Parameters</span><span class="p">.</span><span class="nf">AddWithValue</span><span class="p">(</span><span class="s">"@make"</span><span class="p">,</span> <span class="n">make</span><span class="p">);</span>
            <span class="n">cmd</span><span class="p">.</span><span class="n">Parameters</span><span class="p">.</span><span class="nf">AddWithValue</span><span class="p">(</span><span class="s">"@model"</span><span class="p">,</span> <span class="n">model</span><span class="p">);</span>
            <span class="n">cmd</span><span class="p">.</span><span class="n">Parameters</span><span class="p">.</span><span class="nf">AddWithValue</span><span class="p">(</span><span class="s">"@available"</span><span class="p">,</span> <span class="n">aval</span><span class="p">);</span>
            <span class="n">cmd</span><span class="p">.</span><span class="n">Parameters</span><span class="p">.</span><span class="nf">AddWithValue</span><span class="p">(</span><span class="s">"@regno"</span><span class="p">,</span> <span class="n">id</span><span class="p">);</span>
            <span class="n">cmd</span><span class="p">.</span><span class="nf">ExecuteNonQuery</span><span class="p">();</span>
            <span class="n">MessageBox</span><span class="p">.</span><span class="nf">Show</span><span class="p">(</span><span class="s">"Record updated"</span><span class="p">);</span>
            <span class="n">txtregno</span><span class="p">.</span><span class="n">Enabled</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
            <span class="n">Mode</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>

            <span class="n">txtmake</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>
            <span class="n">txtmodel</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>
            <span class="n">txtavl</span><span class="p">.</span><span class="n">Items</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>
            <span class="n">txtmake</span><span class="p">.</span><span class="nf">Focus</span><span class="p">();</span>
               
        <span class="p">}</span>
            <span class="n">con</span><span class="p">.</span><span class="nf">Close</span><span class="p">();</span>
<span class="p">}</span>
</pre></table></code></div></div><h4 id="method-autono"><span class="mr-2">Method Autono()</span><a href="#method-autono" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>This method sets the car registration number field to the 00000 (if there is no data read from the database), else it increments it by 1, so that the cars entered have the unique reg. no.</p><div class="language-c# highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre><td class="rouge-code"><pre><span class="k">public</span> <span class="k">void</span> <span class="nf">Autono</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">sql</span> <span class="p">=</span> <span class="s">"select regno from carreg order by regno desc"</span><span class="p">;</span>
    <span class="n">cmd</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SqlCommand</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span><span class="n">con</span><span class="p">);</span> <span class="p">;</span>
    <span class="n">con</span><span class="p">.</span><span class="nf">Open</span><span class="p">();</span>
    <span class="n">dr</span> <span class="p">=</span> <span class="n">cmd</span><span class="p">.</span><span class="nf">ExecuteReader</span><span class="p">();</span>

    <span class="k">if</span><span class="p">(</span><span class="n">dr</span><span class="p">.</span><span class="nf">Read</span><span class="p">())</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">id</span> <span class="p">=</span> <span class="kt">int</span><span class="p">.</span><span class="nf">Parse</span><span class="p">(</span><span class="n">dr</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="nf">ToString</span><span class="p">())+</span><span class="m">1</span><span class="p">;</span>
        <span class="n">proid</span> <span class="p">=</span> <span class="n">id</span><span class="p">.</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"00000"</span><span class="p">);</span>
                
    <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">Convert</span><span class="p">.</span><span class="nf">IsDBNull</span><span class="p">(</span><span class="n">dr</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="n">proid</span> <span class="p">=</span> <span class="p">(</span><span class="s">"00000"</span><span class="p">);</span>

        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="n">proid</span> <span class="p">=</span> <span class="p">(</span><span class="s">"00000"</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="n">txtregno</span><span class="p">.</span><span class="n">Text</span> <span class="p">=</span> <span class="n">proid</span><span class="p">.</span><span class="nf">ToString</span><span class="p">();</span>
        <span class="n">con</span><span class="p">.</span><span class="nf">Close</span><span class="p">();</span>
<span class="p">}</span>
</pre></table></code></div></div><h4 id="method-datagridview1_cellcontentclick"><span class="mr-2">Method dataGridView1_CellContentClick()</span><a href="#method-datagridview1_cellcontentclick" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>This method enables editing or deletes the data displayed in dataGridView1. In fact, it is an event that reacts on an user clicking on the particular parts of the gridview. If the user clicks on Edit button, the variable Mode is set to false, which enables updating of the records via the button1_Click() method previously described. Moreover, it sets the textbutton textregno as disabled (since we are editing the particular row in the table); it then reads the id value which is the first field in the datagrid current row and it passes that value to the aforementioned getid() method which enters the other text fields with the corresponding data from the database.</p><div class="language-c# highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre><td class="rouge-code"><pre><span class="k">private</span> <span class="k">void</span> <span class="nf">dataGridView1_CellContentClick</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">DataGridViewCellEventArgs</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">ColumnIndex</span><span class="p">==</span><span class="n">dataGridView1</span><span class="p">.</span><span class="n">Columns</span><span class="p">[</span><span class="s">"edit"</span><span class="p">].</span><span class="n">Index</span> <span class="p">&amp;&amp;</span><span class="n">e</span><span class="p">.</span><span class="n">RowIndex</span><span class="p">&gt;=</span><span class="m">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Mode</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="n">txtregno</span><span class="p">.</span><span class="n">Enabled</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="n">id</span> <span class="p">=</span> <span class="n">dataGridView1</span><span class="p">.</span><span class="n">CurrentRow</span><span class="p">.</span><span class="n">Cells</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">Value</span><span class="p">.</span><span class="nf">ToString</span><span class="p">();</span>
        <span class="nf">getid</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">ColumnIndex</span> <span class="p">==</span> <span class="n">dataGridView1</span><span class="p">.</span><span class="n">Columns</span><span class="p">[</span><span class="s">"delete"</span><span class="p">].</span><span class="n">Index</span> <span class="p">&amp;&amp;</span> <span class="n">e</span><span class="p">.</span><span class="n">RowIndex</span> <span class="p">&gt;=</span> <span class="m">0</span><span class="p">)</span>
    <span class="p">{</span>

        <span class="n">Mode</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="n">id</span> <span class="p">=</span> <span class="n">dataGridView1</span><span class="p">.</span><span class="n">CurrentRow</span><span class="p">.</span><span class="n">Cells</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">Value</span><span class="p">.</span><span class="nf">ToString</span><span class="p">();</span>
        <span class="n">sql</span> <span class="p">=</span> <span class="s">"delete from carreg where regno=@id"</span><span class="p">;</span>
        <span class="n">con</span><span class="p">.</span><span class="nf">Open</span><span class="p">();</span>
        <span class="n">cmd</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SqlCommand</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span><span class="n">con</span><span class="p">);</span>
        <span class="n">cmd</span><span class="p">.</span><span class="n">Parameters</span><span class="p">.</span><span class="nf">AddWithValue</span><span class="p">(</span><span class="s">"@id"</span><span class="p">,</span><span class="n">id</span><span class="p">);</span>
        <span class="n">cmd</span><span class="p">.</span><span class="nf">ExecuteNonQuery</span><span class="p">();</span>
        <span class="n">MessageBox</span><span class="p">.</span><span class="nf">Show</span><span class="p">(</span><span class="s">"Record deleted"</span><span class="p">);</span>
        <span class="n">con</span><span class="p">.</span><span class="nf">Close</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Button2, which is a refresh button, loads two methods and clears the fields. In that way, the records are being displayed into the gridview. The class runs the same methods on startup as well:</p><div class="language-c# highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="k">public</span> <span class="nf">carreg</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nf">InitializeComponent</span><span class="p">();</span>
    <span class="nf">Autono</span><span class="p">();</span>
    <span class="nf">load</span><span class="p">();</span>
<span class="p">}</span>
</pre></table></code></div></div><p>The difference being here that the refresh button enables reloading new records on change – the new records wouldn’t be displayed without refresh button until the program’s restart.</p><div class="language-c# highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="k">private</span> <span class="k">void</span> <span class="nf">button2_Click</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">EventArgs</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nf">load</span><span class="p">();</span>
    <span class="nf">Autono</span><span class="p">();</span>

    <span class="n">txtmake</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>
    <span class="n">txtmodel</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>
    <span class="n">txtmake</span><span class="p">.</span><span class="nf">Focus</span><span class="p">();</span>
<span class="p">}</span>

</pre></table></code></div></div><h3 id="customer-registration"><span class="mr-2">Customer Registration</span><a href="#customer-registration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><img data-src="https://sbozich.github.io/assets/08112207.jpg" alt="" data-proofer-ignore></p><p>This class follows the same logic as previous one, just the names are different.</p><h3 id="rental-registration"><span class="mr-2">Rental Registration</span><a href="#rental-registration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><img data-src="https://sbozich.github.io/assets/08112208.jpg" alt="" data-proofer-ignore></p><p>Here we have two new methods; other code is similar to previous classes. Two feats are new to explain.</p><ol><li><p>Every car needs to have an availability mark; such column exists in table dbo.carreg. Idea is that cars that are taken are marked as unavailable so that the same car can’t be booked twice in the same time period. Method txtcarid_SelectedIndexChanged() queries database with the following:</p><div class="language-c# highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="k">select</span> <span class="p">*</span> <span class="k">from</span> <span class="n">carreg</span> <span class="k">where</span> <span class="n">regno</span><span class="p">=</span><span class="err">'</span><span class="s">"+ txtcarid.Text+ "</span><span class="err">'</span> <span class="s">"
</span>    
</pre></table></code></div></div><p>txtcarid is the designation for the ComboBox, so basically this query tries to get the data filtered by the given carid and to display it in the gridview. If the read from the database succeeds (meaning the data with the particular id exists), then this line:</p><div class="language-c# highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">aval</span><span class="p">=</span><span class="n">dr</span><span class="p">[</span><span class="s">"available"</span><span class="p">].</span><span class="nf">ToString</span><span class="p">();</span>
</pre></table></code></div></div><p>gets the value of column available in the carreg table. If that value is no, meaning car is not available, then the other fields below the ComboBox are disabled because the data on the taken car can’t be changed. Else, those fields are editable. If the read from the database does not succeed, this means car with the particular carid isn’t entered into the database and therefore unavailable.</p><div class="language-c# highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
</pre><td class="rouge-code"><pre><span class="k">private</span> <span class="k">void</span> <span class="nf">txtcarid_SelectedIndexChanged</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">EventArgs</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">cmd</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SqlCommand</span><span class="p">(</span><span class="s">"select * from carreg where regno='"</span><span class="p">+</span> <span class="n">txtcarid</span><span class="p">.</span><span class="n">Text</span><span class="p">+</span> <span class="s">"' "</span><span class="p">,</span> <span class="n">con</span><span class="p">);</span>
    <span class="n">con</span><span class="p">.</span><span class="nf">Open</span><span class="p">();</span>
    <span class="n">dr</span> <span class="p">=</span> <span class="n">cmd</span><span class="p">.</span><span class="nf">ExecuteReader</span><span class="p">();</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">dr</span><span class="p">.</span><span class="nf">Read</span><span class="p">())</span>
    <span class="p">{</span>
        <span class="kt">string</span> <span class="n">aval</span><span class="p">;</span>
        <span class="n">aval</span><span class="p">=</span><span class="n">dr</span><span class="p">[</span><span class="s">"available"</span><span class="p">].</span><span class="nf">ToString</span><span class="p">();</span>

        <span class="n">label9</span><span class="p">.</span><span class="n">Text</span> <span class="p">=</span> <span class="n">aval</span><span class="p">;</span>

        <span class="k">if</span><span class="p">(</span><span class="n">aval</span><span class="p">==</span><span class="s">"No"</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">txtcustid</span><span class="p">.</span><span class="n">Enabled</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
            <span class="n">txtcustname</span><span class="p">.</span><span class="n">Enabled</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
            <span class="n">txtfee</span><span class="p">.</span><span class="n">Enabled</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
            <span class="n">txtdate</span><span class="p">.</span><span class="n">Enabled</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
            <span class="n">txtdue</span><span class="p">.</span><span class="n">Enabled</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="p">}</span>

    <span class="k">else</span> 
    <span class="p">{</span>
        <span class="n">txtcustid</span><span class="p">.</span><span class="n">Enabled</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="n">txtcustname</span><span class="p">.</span><span class="n">Enabled</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="n">txtfee</span><span class="p">.</span><span class="n">Enabled</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="n">txtdate</span><span class="p">.</span><span class="n">Enabled</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="n">txtdue</span><span class="p">.</span><span class="n">Enabled</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="n">label9</span><span class="p">.</span><span class="n">Text</span> <span class="p">=</span> <span class="s">"Car not available"</span><span class="p">;</span>
        <span class="p">}</span>

    <span class="n">con</span><span class="p">.</span><span class="nf">Close</span><span class="p">();</span>
<span class="p">}</span>
</pre></table></code></div></div><li><p>txtcustid_KeyPress method is used when the user enters a value in txtcustid field(Customer ID) and presses key within it. If that key is a Return (KeyChar==13), then via SQL query the program fetches the data from the database. Else, a customer with entered ID does not exist.</p><div class="language-c# highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre>
        <span class="k">private</span> <span class="k">void</span> <span class="nf">txtcustid_KeyPress</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">KeyPressEventArgs</span> <span class="n">e</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">KeyChar</span><span class="p">==</span><span class="m">13</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">cmd</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SqlCommand</span><span class="p">(</span><span class="s">"select * from customer where custid='"</span> <span class="p">+</span> <span class="n">txtcustid</span><span class="p">.</span><span class="n">Text</span> <span class="p">+</span> <span class="s">"' "</span><span class="p">,</span> <span class="n">con</span><span class="p">);</span>
                <span class="n">con</span><span class="p">.</span><span class="nf">Open</span><span class="p">();</span>
                <span class="n">dr</span> <span class="p">=</span> <span class="n">cmd</span><span class="p">.</span><span class="nf">ExecuteReader</span><span class="p">();</span>

                <span class="k">if</span> <span class="p">(</span><span class="n">dr</span><span class="p">.</span><span class="nf">Read</span><span class="p">())</span>
                <span class="p">{</span>
                    <span class="n">txtcustname</span><span class="p">.</span><span class="n">Text</span> <span class="p">=</span> <span class="n">dr</span><span class="p">[</span><span class="s">"custname"</span><span class="p">].</span><span class="nf">ToString</span><span class="p">();</span>
                <span class="p">}</span>

                <span class="k">else</span>
                <span class="p">{</span>
                    <span class="n">MessageBox</span><span class="p">.</span><span class="nf">Show</span><span class="p">(</span><span class="s">"Customer ID not found"</span><span class="p">);</span>

                <span class="p">}</span>
                <span class="n">con</span><span class="p">.</span><span class="nf">Close</span><span class="p">();</span>
                <span class="p">}</span>

        <span class="p">}</span>
</pre></table></code></div></div></ol><h3 id="returncar"><span class="mr-2">Returncar</span><a href="#returncar" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><img data-src="https://sbozich.github.io/assets/08112209.jpg" alt="" data-proofer-ignore></p><p>Class returncar takes into account CarID, CustomerID, Date of return, it counts the elapsed days and it calculates the fine if the number of rental days is bigger than defined in DueDate field in Rental Registration class. It has similar options to edit and delete data in the DataGridView. Let’s see how the fine is calculated. When the user enters the value into the CarID field and press an Enter, this code is being executed:</p><div class="language-c# highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>
<span class="n">cmd</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SqlCommand</span><span class="p">(</span><span class="s">"select car_id,cust_id,date,due,DATEDIFF(dd,due,GETDATE()) as elap from rental where car_id='"</span><span class="p">+</span><span class="n">txtcarid</span><span class="p">.</span><span class="n">Text</span><span class="p">+</span><span class="s">"'"</span><span class="p">,</span><span class="n">con</span><span class="p">);</span>
</pre></table></code></div></div><p>This SQL command will fetch the wanted data and via a SQL function DATEDIFF will calculate the difference between actual date of car return and supposed return date. If that difference is larger than 0 (if it exists), the program will calculate a fee that is times 100 of the number of passed days, else the fee doesn’t exist.</p><h2 id="conclusion"><span class="mr-2">Conclusion</span><a href="#conclusion" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>In order to develop a simple program like this, one should possess following knowledge:</p><ul><li>designing a database in SQL Server,<li>connecting a SQL Server to a C#,<li>writing basic SQL queries,<li>using Windows Forms UI framework,<li>manipulate the elements of the UI and write the corresponding code,<li>finally, have a basic overview of Visual Studio in which the program is developed.</ul><p>Possible improvements:</p><ul><li>improve user login via using trusted connection (without passing an user id and password) - current solution is prone to SQL injection attack,<li>use other way to connect to the database, without having the need to manually close the connection every time the data is fetched (open connections to the SQL server are security issues as well as performance hogs).</ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/c/'>C#</a>, <a href='/categories/sql-server/'>sql server</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/c/" class="post-tag no-text-decoration" >C#</a> <a href="/tags/databases/" class="post-tag no-text-decoration" >databases</a> <a href="/tags/windows-forms/" class="post-tag no-text-decoration" >windows forms</a> <a href="/tags/visual-studio/" class="post-tag no-text-decoration" >visual studio</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=C%23+Mini+Project+-+Car+Rental+program+detailed+overview+-+sbozich&url=https%3A%2F%2Fsbozich.github.io%2Fposts%2Fmini-project-car-rental%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=C%23+Mini+Project+-+Car+Rental+program+detailed+overview+-+sbozich&u=https%3A%2F%2Fsbozich.github.io%2Fposts%2Fmini-project-car-rental%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fsbozich.github.io%2Fposts%2Fmini-project-car-rental%2F&text=C%23+Mini+Project+-+Car+Rental+program+detailed+overview+-+sbozich" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/understanding-the-css-cascade/">Understanding the CSS Cascade&#58; How Styles are Applied in Web Development</a><li><a href="/posts/review-of-book-learn-python/">Review of the book - "A Smarter Way To Learn Python"</a><li><a href="/posts/thinkpad-x201-review/">Retro computing - review of the Lenovo Thinkpad X201</a><li><a href="/posts/hp-notebook-15-review/">HP Notebook 15 review – computing on a budget</a><li><a href="/posts/library-management-system/">C# Mini Project - Library Management System program detailed overview</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/functions/">functions</a> <a class="post-tag" href="/tags/bytecode/">bytecode</a> <a class="post-tag" href="/tags/compiler/">compiler</a> <a class="post-tag" href="/tags/databases/">databases</a> <a class="post-tag" href="/tags/interpreter/">interpreter</a> <a class="post-tag" href="/tags/algorithms/">algorithms</a> <a class="post-tag" href="/tags/arguments/">arguments</a> <a class="post-tag" href="/tags/big-o/">big-o</a> <a class="post-tag" href="/tags/books/">books</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/library-management-system/"><div class="card-body"> <em class="small" data-ts="1669071600" data-df="ll" > Nov 22, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>C# Mini Project - Library Management System program detailed overview</h3><div class="text-muted small"><p> In this mini project, we will be creating a program in C# which serves as a Library Management System, enabling the basic functions of one such system. In particular, there are separate records of ...</p></div></div></a></div><div class="card"> <a href="/posts/connect-python-to-mysql-avoid-injection/"><div class="card-body"> <em class="small" data-ts="1665180000" data-df="ll" > Oct 8, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Connecting Python to MySQL and tips to avoid SQL injection attacks</h3><div class="text-muted small"><p> To quick-connect Python program with a MySQL, one needs to consider following: MySQL driver needs to be installed, connection object needs to be created, cursor object needs to be created, ...</p></div></div></a></div><div class="card"> <a href="/posts/understanding-the-css-cascade/"><div class="card-body"> <em class="small" data-ts="1697752800" data-df="ll" > Oct 20, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Understanding the CSS Cascade&#58; How Styles are Applied in Web Development</h3><div class="text-muted small"><p> Cascading Style Sheets (CSS) is a fundamental technology used to style the layout and appearance of web pages. One of the core concepts that developers need to understand when working with CSS is t...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/why-study-it/" class="btn btn-outline-primary" prompt="Older"><p>Why (not) study IT – my thoughts</p></a> <a href="/posts/windows-sandbox-overview/" class="btn btn-outline-primary" prompt="Newer"><p>Windows Sandbox overview - Enabling, Features, Usability, Security</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/sbozich">Sinisa Bozic</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/functions/">functions</a> <a class="post-tag" href="/tags/bytecode/">bytecode</a> <a class="post-tag" href="/tags/compiler/">compiler</a> <a class="post-tag" href="/tags/databases/">databases</a> <a class="post-tag" href="/tags/interpreter/">interpreter</a> <a class="post-tag" href="/tags/algorithms/">algorithms</a> <a class="post-tag" href="/tags/arguments/">arguments</a> <a class="post-tag" href="/tags/big-o/">big-o</a> <a class="post-tag" href="/tags/books/">books</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
